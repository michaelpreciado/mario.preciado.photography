'use strict';(function(){const isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;const isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);const isMobile=window.innerWidth<768||/Mobi|Android/i.test(navigator.userAgent);let resizeTimer;function handleResize(){clearTimeout(resizeTimer);resizeTimer=setTimeout(()=>{if(window.innerWidth>992&&document.querySelector('#main-navigation').classList.contains('active')){document.querySelector('#main-navigation').classList.remove('active');document.querySelector('.menu-btn').setAttribute('aria-expanded','false');document.body.style.overflow='';}},100);}window.addEventListener('resize',handleResize,{passive:true});document.addEventListener('click',function(event){const sidebar=document.getElementById('main-navigation');const menuBtn=document.querySelector('.menu-btn');if(sidebar&&sidebar.classList.contains('active')&&!sidebar.contains(event.target)&&!menuBtn.contains(event.target)){sidebar.classList.remove('active');menuBtn.setAttribute('aria-expanded','false');document.body.style.overflow='';}},{passive:true});function initializeHeroImage(){const randomImage=document.getElementById('randomImage');if(!randomImage)return;const imageCount=17;const randomIndex=Math.floor(Math.random()*imageCount)+1;const parent=randomImage.parentElement;parent.classList.add('loading');function tryLoadImage(extensions){if(extensions.length===0){console.error('Failed to load image');randomImage.src='public/fallback-image.jpg';parent.classList.remove('loading');return;}const ext=extensions[0];const img=new Image();const imgUrl=`public/image${randomIndex}.${ext}`;if('loading'in HTMLImageElement.prototype){img.loading='eager';}img.onload=()=>{randomImage.src=imgUrl;randomImage.classList.add('loaded');parent.classList.remove('loading');};img.onerror=()=>{tryLoadImage(extensions.slice(1));};img.src=imgUrl;}tryLoadImage(['webp','jpg','JPG','jpeg','JPEG']);}function handleGalleryImages(){const images=document.querySelectorAll('.portfolio-grid img, .two-column-grid img');if(!images.length)return;const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){const delay=isIOS?Math.random()*50:Math.random()*100;setTimeout(()=>{entry.target.classList.add('visible');},delay);observer.unobserve(entry.target);}});},{threshold:isIOS?0.01:0.1,rootMargin:'0px 0px 50px 0px'});images.forEach(img=>{if('loading'in HTMLImageElement.prototype){img.loading='lazy';}observer.observe(img);if(img.complete&&img.naturalWidth){img.classList.add('visible');}});}function handleSmoothScroll(){const links=document.querySelectorAll('a[href^="#"]:not([href="#"])');links.forEach(link=>{link.addEventListener('click',function(e){e.preventDefault();if(document.querySelector('#main-navigation').classList.contains('active')){document.querySelector('#main-navigation').classList.remove('active');document.querySelector('.menu-btn').setAttribute('aria-expanded','false');document.body.style.overflow='';}const targetId=this.getAttribute('href').substring(1);const targetElement=document.getElementById(targetId);if(targetElement){window.scrollTo({top:targetElement.getBoundingClientRect().top+window.pageYOffset,behavior:'smooth'});history.pushState(null,null,`#${targetId}`);}});});}function handlePageTransitions(){document.querySelectorAll('a').forEach(link=>{if(link.hostname===window.location.hostname&&!link.hasAttribute('data-no-transition')&&link.getAttribute('href').indexOf('#')!==0){link.addEventListener('click',function(e){e.preventDefault();const href=this.getAttribute('href');document.body.classList.add('page-transition');setTimeout(()=>{window.location.href=href;},isIOS?200:300);});}});}function createSymbols(containerClass,symbolClass,count){const container=document.createElement('div');container.className=containerClass;document.body.appendChild(container);const maxSize=isMobile?25:40;for(let i=0;i<count;i++){const symbol=document.createElement('div');symbol.className=symbolClass;if(isMobile){symbol.style.fontSize=`${Math.floor(Math.random()*15)+10}px`;}else{symbol.style.fontSize=`${Math.floor(Math.random()*25)+15}px`;}symbol.style.color=`hsl(${Math.floor(Math.random()*360)}, 100%, 75%)`;symbol.style.left=`${Math.random()*100}%`;symbol.style.top=`${Math.random()*(isMobile?150:120)}%`;symbol.style.animationDuration=`${Math.random()*20+10}s`;symbol.style.animationDelay=`${Math.random()*5}s`;container.appendChild(symbol);}}function createMusicSymbols(){if(!document.querySelector('.home-page'))return;createSymbols('music-symbols-container','music-symbol',isMobile?10:20);const symbols='♩♪♫♬♭♮♯𝄞𝄡𝄢';const container=document.querySelector('.music-symbols-container');if(!container)return;const musicSymbols=container.querySelectorAll('.music-symbol');musicSymbols.forEach(symbol=>{symbol.textContent=symbols.charAt(Math.floor(Math.random()*symbols.length));});}function createHeartSymbols(){if(!document.querySelector('.about-page'))return;createSymbols('heart-symbols-container','heart-symbol',isMobile?8:15);const container=document.querySelector('.heart-symbols-container');if(!container)return;const heartSymbols=container.querySelectorAll('.heart-symbol');heartSymbols.forEach(symbol=>{symbol.innerHTML='&#10084;';});}function createPeaceSymbols(){const pages=document.querySelectorAll('.home-page, .portfolio-page');if(!pages.length)return;pages.forEach(page=>{createSymbols('peace-symbols-container','peace-symbol',isMobile?8:15);const container=document.querySelector('.peace-symbols-container');if(!container)return;const peaceSymbols=container.querySelectorAll('.peace-symbol');peaceSymbols.forEach(symbol=>{symbol.innerHTML='&#9774;';});});}function optimizeImageLoading(){const pageName=document.body.className;const imagesToPreload=[];if(pageName==='home-page'){imagesToPreload.push('public/optimized/image1.webp','public/optimized/image2.webp','public/background.jpg');}else if(pageName==='portfolio-page'){const portfolioImages=document.querySelectorAll('.portfolio-grid img');if(portfolioImages.length){const visibleImages=Array.from(portfolioImages).slice(0,4).map(img=>img.src);imagesToPreload.push(...visibleImages);}}if(imagesToPreload.length){imagesToPreload.forEach(src=>{const img=new Image();img.src=src;});}document.addEventListener('DOMContentLoaded',()=>{if('connection'in navigator&&(navigator.connection.saveData||(navigator.connection.effectiveType&&['slow-2g','2g','3g'].includes(navigator.connection.effectiveType)))){const allImgs=document.querySelectorAll('img[loading="lazy"]');allImgs.forEach(img=>{if(img.parentNode.tagName==='PICTURE'){const sources=img.parentNode.querySelectorAll('source');sources.forEach(source=>{if(source.srcset.includes('webp')){source.remove();}});}});}});}function initialize8BitStyles(){document.body.classList.add('pixel-page');const pixelizeText=document.querySelectorAll('.pixel-text');pixelizeText.forEach(element=>{const text=element.textContent;element.textContent='';for(let i=0;i<text.length;i++){const span=document.createElement('span');span.textContent=text[i];span.style.animationDelay=`${i*0.05}s`;element.appendChild(span);}});}function init(){document.documentElement.style.scrollBehavior=isIOS?'auto':'smooth';handleGalleryImages();handleSmoothScroll();handlePageTransitions();initializeHeroImage();optimizeImageLoading();createMusicSymbols();createHeartSymbols();createPeaceSymbols();initialize8BitStyles();document.body.classList.add('page-loaded');}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',init);}else{init();}})(); 